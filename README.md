# ComfyUI-Model-Visual-Loader
ComfyUI模型加载带预览图功能节点
 是一款专为 ComfyUI 用户打造的高效可视化模型加载插件，通过直观的缩略图预览和强大的分类搜索功能，将繁琐的模型选择过程转化为愉悦的视觉体验。

---

### 🚀 插件优势

* **告别“开盲盒”**：通过自动提取模型同名预览图，让你在加载前就能直观预览模型风格。
* **极致流畅体验**：内置智能缓存机制，自动将高清封面图转换为轻量化的 512px 缩略图，并根据原图更新时间自动刷新，兼顾清晰度与加载速度。
* **文件夹自动分类**：完美继承你的模型文件夹结构，自动按子文件夹生成分类标签，让成百上千个模型井然有序。
* **文档级注释管理**：支持直接在 UI 界面查看和修改模型同名的 `.txt` 注释文件，方便随时记录触发词或模型特点。

---

### 📦 节点与功能详细介绍

该插件在 ComfyUI 中新增了 **`💝可视化加载器`** 分类，包含以下核心节点：

#### 1. 核心加载节点

* **Checkpoint加载器**：用于加载大模型（.safetensors/.ckpt），同步输出 MODEL、CLIP 和 VAE。
* **Lora加载器**：标准 LoRA 加载器，支持同时调整模型强度和 CLIP 强度。
* **Lora加载器_仅模型**：特殊用途加载器，仅修改扩散模型部分，减少对提示词的干扰。
* **UNET加载器**：专为高级工作流设计，用于单独加载 UNet/DiT 部分，支持设置不同的权重精度（如 fp8）。
* **LoRA堆加载器**：支持可视化批量添加与管理 LoRA。
* **实现状态记忆**：重新打开工作流，节点保持上次的使用状态。

#### 2. 功能特性

* **可视化网格 (Visual Grid)**：支持响应式布局的图片网格，选中模型即时高亮。
* **搜索与筛选**：顶栏集成关键词实时搜索和下拉分类选择，快速锁定目标。
* **注释互动系统**：容器下方设有“查看注释”与“修改注释”按钮。点击即可弹出模态框读取或保存模型目录下的同名文本文件。
* **智能缓存系统**：后台自动管理 `cached_images` 文件夹，仅在检测到原图变动时重新生成，确保 UI 始终显示最新内容。

---


### ** 更新介绍 **

### 20260215
1. **新增 LoRA堆 功能**：推出“LoRA堆加载器”与“仅模型”双节点，支持可视化批量添加与管理 LoRA。
2. **优化参数面板布局**：双参数堆节点采用全新的双层 UI 设计，模型强度与 CLIP 强度独立调节，告别拥挤。
3. **升级智能状态记忆**：重构存储逻辑，刷新页面可毫秒级精确恢复最后一次的文件夹、滚动位置及高亮选中项。
4. **实现节点独立状态**：工作流中多个可视化节点互不干扰，各自独立记录浏览路径与配置。
5. **修复交互体验问题**：彻底解决了调整数值时列表自动跳底、卡片边缘悬停闪烁以及 Windows 路径高亮失效的问题。

---

### 🛠 使用方法

1. **添加节点**：在画布上右键搜索以上节点名称，或在 `💝可视化加载器` 菜单中选择。
2. **配置预览图**：将与模型同名的图片（支持 .png, .jpg, .webp）放入模型文件夹中。
3. **模型筛选**：
* 通过顶部的 **下拉菜单** 按子文件夹筛选。
* 在 **搜索框** 输入模型名称关键词。


4. **注释管理**：
* 选中模型卡片。
* 点击底部的 **“查看注释”** 阅读模型说明。
* 点击 **“修改注释”** 记录提示词或参数建议并保存。



---

### ⚙️ 安装方法

**方法一：Git Clone (推荐)**

1. 进入你的 ComfyUI 安装目录下的 `custom_nodes` 文件夹。
2. 打开终端/命令行，输入以下命令：
```bash
git clone https://github.com/a63976659/ComfyUI-Model-Visual-Loader.git

```


3. 重启 ComfyUI。

**方法二：手动安装**

1. 访问 [GitHub 仓库](https://github.com/a63976659/ComfyUI-Model-Visual-Loader) 下载 ZIP 压缩包。
2. 解压至 `custom_nodes/ComfyUI-Model-Visual-Loader` 文件夹。
3. 确保依赖库 `Pillow` 已安装（通常 ComfyUI 自带）。
4. 重启 ComfyUI。

---


## ⚡ 性能技术指标 (Performance Metrics)

| 指标 | 数值 | 说明 |
| --- | --- | --- |
| **显存占用 (VRAM)** | **0 MB (额外)** | 插件仅处理 UI 逻辑与文件索引，不预加载模型权重，不占用任何额外显存。 |
| **内存占用 (RAM)** | **< 15 MB** | 采用前端 `IMAGE_CACHE` 机制与分页渲染技术，即便有上千个模型，系统内存压力也极小。 |
| **加载速度 (Speed)** | **20-100ms** | 模型列表采用异步 API 调取，缩略图加载支持浏览器级缓存，实现毫秒级 UI 响应。 |
| **首图生成耗时** | **~200ms / 张** | 仅在模型首次被扫描且存在原图时触发 Pillow 缩放处理，之后将永久读取缓存。 |
| **硬盘 I/O** | **低** | 仅执行文件扫描 (Scan) 与修改时间校验 (mtime check)，不涉及大容量模型文件的二进制读取。 |
| **并发处理** | **支持** | 采用 `aiohttp` 异步路由处理图片请求，防止在加载大量缩略图时卡死 ComfyUI 主线程。 |
| **环境依赖** | **极简** | 纯 Python + 原生 JS 实现，仅需额外安装 `Pillow` 用于图片处理。 |

---

### 🔍 性能优化要点说明：

1. **智能缩略图策略**：插件会将原始大尺寸预览图统一压缩为宽度 **512px** 的 PNG 格式，大幅降低了网络传输量和浏览器渲染负担。
2. **增量更新机制**：通过对比 `src_mtime`（原图时间）与 `cache_mtime`（缓存时间），确保仅在原图变动时才消耗 CPU 重新生成图片，避免无效运算。
3. **零阻塞 UI**：模型检索与图片缓存生成的逻辑完全在后端异步执行，不会影响 ComfyUI 画布的正常操作。

---
### **支持开发者**
如果这个插件帮你节省了大量时间，欢迎：
- ⭐ **Star 项目**让更多人看到
- 🐛 **提交 Issue** 帮助改进
- 📖 **分享教程** 帮助其他用户
- ☕ **请作者喝咖啡**
**🔔 关注更新，获取最新功能和模型数据库**
---
**作者**：a63976659  
- [小红书：猪的飞行梦] 
- [哔哩哔哩主页：https://space.bilibili.com/2114638644]

**致谢**：感谢所有测试用户和贡献者！
如果你觉得插件还不错可以点个收藏。


请作者喝奶茶可以扫个码😀😀😀
养家版二维码❥(^_-)
![收款二维码](https://github.com/user-attachments/assets/687a3fc3-2511-47c7-bc71-1e06527dbe01)


---
